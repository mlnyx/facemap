# Willis ì•ˆë©´ ê³„ì¸¡ ì‹œìŠ¤í…œ - ì‚¬ìš© ê°€ì´ë“œ

## ğŸ“‹ ì „ì²´ ê¸°ëŠ¥ ê°œìš”

4ê°€ì§€ ì£¼ìš” ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ:

1. **ì •ë©´ ë¶„ì„** (Willis Method): ìˆ˜ì§ê³ ê²½(VDO) ì¸¡ì •
2. **ì¸¡ë©´ ë¶„ì„** (Profile Analysis): CR(Centric Relation) ìœ„ì¹˜ ê°ì§€
3. **ë¹„êµ ë¶„ì„** (Comparison Tool): ì—¬ëŸ¬ ì‚¬ì§„ ë¹„êµ ë° ê°œì„ ë„ ì¶”ì 
4. **AI í•™ìŠµ ì¤€ë¹„** (Training Data): ë”¥ëŸ¬ë‹ ëª¨ë¸ í•™ìŠµìš© ë°ì´í„° ìˆ˜ì§‘

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### 1ï¸âƒ£ ì‹¤ì‹œê°„ ì¹´ë©”ë¼ ë¶„ì„

```bash
python willis_realtime.py
```

- ì›¹ìº ìœ¼ë¡œ ì‹¤ì‹œê°„ Willis ë¹„ìœ¨ ì¸¡ì •
- ì •ë©´ë„, ëŒ€ì¹­ë„ ìë™ íŒë‹¨
- ESC: ì¢…ë£Œ, S: ìŠ¤í¬ë¦°ìƒ·

### 2ï¸âƒ£ ì‚¬ì§„ ë¶„ì„ (ë‹¨ì¼)

```bash
python willis_photo_analysis.py data/input/ì •ë©´1.jpeg
```

- ë‹¨ì¼ ì‚¬ì§„ ë¶„ì„
- ê²°ê³¼ ì´ë¯¸ì§€ ìë™ ì €ì¥ (data/output/)

### 3ï¸âƒ£ ì¸¡ë©´ ë¶„ì„ (ì˜ì¹˜ ì „í›„ ë¹„êµ)

```bash
python willis_profile.py data/input/êµ¬ì˜ì¹˜ì˜†.jpeg data/input/ì‹ ì˜ì¹˜ì˜†.jpeg
```

- ì˜ì¹˜ ì¥ì°© ì „í›„ í„± ìœ„ì¹˜ ë³€í™” ê°ì§€
- í„± ì´ë™ëŸ‰(px), ê°ë„ ë³€í™”(Â°), ìì—°ìŠ¤ëŸ¬ì›€ ì ìˆ˜(0-100)
- 30px ì´ìƒ ì´ë™ì‹œ ê²½ê³ 

### 4ï¸âƒ£ ë¹„êµ ë¶„ì„ (ì—¬ëŸ¬ ì‚¬ì§„)

```bash
python willis_compare.py data/input/êµ¬ì˜ì¹˜.jpeg data/input/ì‹ ì˜ì¹˜.jpeg data/input/1220ì¶”ê°€ì‚¬ì§„.jpeg
```

**ì¶œë ¥:**

- ğŸ“Š ë¹„êµ ì°¨íŠ¸ (4ê°œ ê·¸ë˜í”„): Willis ë¹„ìœ¨, ê±°ë¦¬ ë¹„êµ, ëŒ€ì¹­ë„, ê°œì„ ë„
- ğŸ“„ í…ìŠ¤íŠ¸ ë¦¬í¬íŠ¸: í†µê³„, í‰ê· , ê°œì„ ìœ¨
- ì €ì¥ ìœ„ì¹˜: `data/output/comparison_chart.png`, `data/output/willis_report.txt`

### 5ï¸âƒ£ PWA ì›¹ì•± ì‹¤í–‰

```bash
python willis_web.py
```

- ë¸Œë¼ìš°ì €: http://localhost:5001/pwa
- ëª¨ë°”ì¼ ì„¤ì¹˜ ê°€ëŠ¥ (í™ˆ í™”ë©´ì— ì¶”ê°€)
- ì˜¤í”„ë¼ì¸ ì§€ì› (Service Worker)

### 6ï¸âƒ£ AI í•™ìŠµ ë°ì´í„° ì¤€ë¹„

```bash
# ë‹¨ì¼ ì´ë¯¸ì§€ ì¶”ê°€
python ai_train_prepare.py add data/input/ì •ë©´1.jpeg

# ì¼ê´„ ì¶”ê°€
python ai_train_prepare.py batch 'data/input/*.jpeg'

# í†µê³„ ë³´ê¸°
python ai_train_prepare.py stats

# í•™ìŠµìš© ë°ì´í„° ë‚´ë³´ë‚´ê¸° (CSV, NumPy)
python ai_train_prepare.py export
```

**ëª©í‘œ:** 500ê±´ ì´ìƒ (ë…¼ë¬¸ ê¸°ì¤€, 90% ì •í™•ë„)

### 7ï¸âƒ£ AI ëª¨ë¸ ë°ëª¨

```bash
python ai_model.py
```

- Neuro-T ìŠ¤íƒ€ì¼ CNN ëª¨ë¸ (468 ëœë“œë§ˆí¬ ê¸°ë°˜)
- íŠ¹ì§• ê¸°ë°˜ MLP ëª¨ë¸ (5ê°œ íŠ¹ì§•)
- ë”ë¯¸ ë°ì´í„°ë¡œ í•™ìŠµ ì‹œì—°

---

## ğŸ“Š Willis ë¹„ìœ¨ íŒì • ê¸°ì¤€

| Willis ë¹„ìœ¨ | ë¶„ë¥˜          | ì˜ë¯¸               |
| ----------- | ------------- | ------------------ |
| < 0.90      | **í‰ê·  ì´í•˜** | ìˆ˜ì§ê³ ê²½(VDO) ê°ì†Œ |
| 0.90 ~ 1.10 | **ì •ìƒ**      | ì •ìƒ ë²”ìœ„          |
| > 1.10      | **í‰ê·  ì´ìƒ** | ìˆ˜ì§ê³ ê²½ ì¦ê°€      |

**ê³„ì‚°ì‹:**  
`Willis ë¹„ìœ¨ = (ë¹„ì €ë¶€-í„±ë ê±°ë¦¬) / (ë™ê³µ-êµ¬ì—´ ê±°ë¦¬)`

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
facemap/
â”œâ”€â”€ willis_realtime.py          # ì‹¤ì‹œê°„ ì¹´ë©”ë¼
â”œâ”€â”€ willis_photo_analysis.py    # ì‚¬ì§„ ë¶„ì„
â”œâ”€â”€ willis_profile.py           # ì¸¡ë©´ ë¶„ì„ (NEW)
â”œâ”€â”€ willis_compare.py           # ë¹„êµ ë¶„ì„ (NEW)
â”œâ”€â”€ willis_web.py              # Flask ì›¹ ì„œë²„
â”œâ”€â”€ ai_train_prepare.py        # AI ë°ì´í„° ìˆ˜ì§‘ (NEW)
â”œâ”€â”€ ai_model.py                # AI ëª¨ë¸ ì •ì˜ (NEW)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ landmarker.py      # MediaPipe 468 ëœë“œë§ˆí¬
â”‚   â”‚   â””â”€â”€ analyzer.py        # Willis ê³„ì‚° ë¡œì§
â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â””â”€â”€ visualizer.py      # ì‹œê°í™”
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ text_renderer.py   # í•œê¸€ ë Œë”ë§
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ index.html             # ê¸°ë³¸ ì›¹ UI
â”‚   â””â”€â”€ pwa.html              # PWA ëª¨ë°”ì¼ UI (NEW)
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ manifest.json         # PWA ì„¤ì • (NEW)
â”‚   â””â”€â”€ sw.js                 # Service Worker (NEW)
â””â”€â”€ data/
    â”œâ”€â”€ input/                # ì…ë ¥ ì´ë¯¸ì§€
    â”œâ”€â”€ output/               # ë¶„ì„ ê²°ê³¼
    â””â”€â”€ training/             # AI í•™ìŠµ ë°ì´í„° (NEW)
        â”œâ”€â”€ dataset.json
        â”œâ”€â”€ training_data.csv
        â”œâ”€â”€ features.npy
        â””â”€â”€ labels.npy
```

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

- **Python 3.9.18** (3.10+ í˜¸í™˜ ì•ˆë¨, mutex ë²„ê·¸)
- **MediaPipe 0.10.31** (468 ëœë“œë§ˆí¬)
- **OpenCV 4.12.0.88** (ì˜ìƒ ì²˜ë¦¬)
- **Flask 3.1.2** (ì›¹ ì„œë²„)
- **TensorFlow 2.x** (AI ëª¨ë¸)
- **Matplotlib** (ì°¨íŠ¸ ìƒì„±)
- **PIL/Pillow** (í•œê¸€ ë Œë”ë§)

---

## ğŸ“ˆ ë¶„ì„ ì˜ˆì‹œ

### ì‹¤ì œ ì¸¡ì • ê²°ê³¼:

| ì‚¬ì§„              | Willis ë¹„ìœ¨ | íŒì •                  |
| ----------------- | ----------- | --------------------- |
| ì •ë©´1.jpeg        | 0.893       | âš ï¸ í‰ê·  ì´í•˜          |
| ì •ë©´2.jpeg        | 0.870       | âš ï¸ í‰ê·  ì´í•˜          |
| êµ¬ì˜ì¹˜.jpeg       | 0.816       | âš ï¸ í‰ê·  ì´í•˜          |
| ì‹ ì˜ì¹˜.jpeg       | 0.867       | âš ï¸ í‰ê·  ì´í•˜ (ê°œì„ ë¨) |
| 1220ì¶”ê°€ì‚¬ì§„.jpeg | 0.989       | âœ… **ì •ìƒ**           |
| 1221_1.png        | 0.862       | âš ï¸ í‰ê·  ì´í•˜          |
| 1221_2.png        | 0.906       | âœ… **ì •ìƒ**           |

**ê°œì„ ë„:** êµ¬ì˜ì¹˜(0.816) â†’ ì‹ ì˜ì¹˜(0.867) = **+6.3%** í–¥ìƒ

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

### 1. ì¸¡ë©´ ë¶„ì„ í…ŒìŠ¤íŠ¸

```bash
# ì¸¡ë©´ ì‚¬ì§„ìœ¼ë¡œ CR ìœ„ì¹˜ ë¶„ì„ í…ŒìŠ¤íŠ¸
python willis_profile.py [êµ¬ì˜ì¹˜ì˜†.jpeg] [ì‹ ì˜ì¹˜ì˜†.jpeg]
```

### 2. PWA ë°°í¬

- HTTPS ì„œë²„ í•„ìš” (Service Worker ìš”êµ¬ì‚¬í•­)
- Vercel, Netlify, AWS ë“± ë°°í¬

### 3. AI ë°ì´í„° ìˆ˜ì§‘

- ëª©í‘œ: 500ê±´ ì´ìƒ
- ë‹¤ì–‘í•œ ì¼€ì´ìŠ¤ (ì •ìƒ, í‰ê·  ì´í•˜, í‰ê·  ì´ìƒ)
- ì •ë©´/ì¸¡ë©´ ê· í˜•

### 4. ëª¨ë¸ í•™ìŠµ

```python
# ai_model.py ìˆ˜ì •í•˜ì—¬ ì‹¤ì œ ë°ì´í„°ë¡œ í•™ìŠµ
from ai_model import WillisNeuroModel
import numpy as np

# ë°ì´í„° ë¡œë“œ
features = np.load('data/training/features.npy')
labels = np.load('data/training/labels.npy')

# í•™ìŠµ
model = WillisNeuroModel()
model.compile_model()
model.train(features, labels, epochs=100)
model.save()
```

### 5. íŠ¹í—ˆ ì¶œì›

- ì•ëª¨ìŠµ AI ë¶„ì„ ì‹œìŠ¤í…œ
- Willis ìë™ ì¸¡ì • ì•Œê³ ë¦¬ì¦˜
- ì¸¡ë©´ CR ìœ„ì¹˜ ê°ì§€ ë°©ë²•

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **Python ë²„ì „**: ë°˜ë“œì‹œ 3.9.x ì‚¬ìš© (3.10+ ë²„ê·¸ ìˆìŒ)
2. **ì •ë©´ ì‚¬ì§„**: ëŒ€ì¹­ë„ 85% ì´ìƒ ê¶Œì¥
3. **ì¡°ëª…**: ê· ì¼í•œ ì¡°ëª…, ê·¸ë¦¼ì ìµœì†Œí™”
4. **í•´ìƒë„**: ìµœì†Œ 480x640 ì´ìƒ ê¶Œì¥
5. **ì–¼êµ´ ê°ë„**: ì •ë©´ ì‘ì‹œ, ê³ ê°œ ìˆ™ì´ì§€ ì•Šê¸°

---

## ğŸ“ ë¬¸ì œ í•´ê²°

### "mutex lock failed" ì˜¤ë¥˜

```bash
# Python 3.9.18ë¡œ ë‹¤ìš´ê·¸ë ˆì´ë“œ
pyenv install 3.9.18
pyenv local 3.9.18
```

### í•œê¸€ ê¹¨ì§

- PIL ìë™ í•œê¸€ í°íŠ¸ ì‚¬ìš© ì¤‘
- AppleGothic.ttf ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ ëŒ€ì²´ í°íŠ¸ ì‚¬ìš©

### ì–¼êµ´ ì¸ì‹ ì‹¤íŒ¨

- ì¡°ëª… ê°œì„ 
- ì¹´ë©”ë¼ ê°ë„ ì¡°ì •
- í•´ìƒë„ ë†’ì´ê¸°

---

## ğŸ“š ì°¸ê³  ë…¼ë¬¸

- **Willis ì•ˆë©´ ê³„ì¸¡ë²•**: ìˆ˜ì§ê³ ê²½ ì¸¡ì •ì˜ í‘œì¤€ ë°©ë²•
- **Neuro-T ëª¨ë¸**: ë”¥ëŸ¬ë‹ ê¸°ë°˜ ì•ˆë©´ ë¶„ì„ (90% ì •í™•ë„)
- **CR(Centric Relation)**: ì¤‘ì‹¬ìœ„ ì¸¡ì • ë° ì˜ì¹˜ ì í•©ë„ í‰ê°€

---

**Â© 2024 Willis FaceMap System**
